<link rel="import" href="../bower_components/polymer/polymer.html" />
<link rel="import" href="../bower_components/paper-checkbox/paper-checkbox.html" />
<link rel="import" href="../bower_components/paper-button/paper-button.html" />

<link rel="import" href="../styles/shared-styles.html" />

<dom-module id="checkbox-list">
    <template>
        <style include="shared-styles iron-flex iron-flex-alignment">

            p {
                font-size: 12pt;
            }

            paper-button.clearBtn {
                background-color: #2196F3;
                text-transform: none;
                width: 100%;
                
            }

            .clearBtnDiv {
                margin: auto;
                width: 50%;
            }
        </style>
        
        <div style="height:100%">

            <div id="checkBoxes" >
                <template is="dom-repeat" items="{{dataList}}">
                    <div id="tickList" class="layout vertical" style="margin-left: 10px; padding: 5px; ">
                        <paper-checkbox id="{{item.id}}"  on-change="addToList"><p>{{item.name}}</p></paper-checkbox>
                    </div>
                </template>
            </div>

            <div class="clearBtnDiv">
                <paper-button class="clearBtn" on-click="clearCheckBoxes" raised><iron-icon icon="icons:clear"></iron-icon>Clear</paper-button>
            </div>
        </div>



    </template>

    <script>
        Polymer({

            is: 'checkbox-list',

          
            properties: {
                
                listName: { type: String },
                dataList: { type: Array },
                resultList: { type: Array, value: [] },

            },
            
           
            addToList: function (e) {

                debugger;
                var tempList = "";
                if (e.target.checked) {

                    tempList = e.target.id;
                    this.push('resultList', tempList);
                }

                else {
                    var index = this.resultList.indexOf(e.target.id);
                    this.splice('resultList', index, 1);
                }
                
                this.fire('applyFilter', { List: this.resultList });

            },

         
            clearCheckBoxes: function () {


                var count = this.$.checkBoxes.children.length - 1;

                for (var i = 0; i < count; i++) {

                    if (this.$.checkBoxes.children[i].children[0].checked)
                        this.$.checkBoxes.children[i].children[0].checked = false;
                }

                this.fire('clearFilter');
            }


        });
    </script>
</dom-module>